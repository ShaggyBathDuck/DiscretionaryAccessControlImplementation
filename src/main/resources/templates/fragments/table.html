<!--/*--><!--@thymesVar id="data" type="Pair<String, SortedMap<String, com.bsk.domain.EntityInfo>> "--><!--*/-->
<div xmlns:th="http://www.thymeleaf.org"
     th:fragment="tableDiv"
     th:with="entitiesInfo=${data.getValue()},
            activeTabName=${data.getKey()}">


    <div class="col-md-2 " style="height: 570px; background-color:rgba(34,171,233,0.2); padding-top: 10px">

        <H4 style="text-align: center">Hurtownia</H4>
        <hr/>
        <ul th:each="entry : ${entitiesInfo}">
            <li th:id="buttons">
                <button type="button" class="btn btn-sq btn-block btn-space" th:text="${entry.key}"
                        th:onclick="|changeTable('${entry.key}');refresh('${entry.key}')|"
                        th:classappend="${entry.key == activeTabName}? btn-info: none">
                </button>
            </li>
        </ul>
    </div>
    <div class="col-md-1">

    </div>
    <div class="col-md-8">
        <h4 style="text-align: left">Dane w tabeli</h4>
        <div th:id="tableDiv" id="tableDiv">
            <h3 style="text-align: center">Wybierz tabelę z menu po lewej.</h3>
            <table id="table" class="table table-condensed table-bordered table-hover"
                   cellspacing="10" width="70%">
                <thead>
                <tr>
                    <th th:each="columnName : ${entitiesInfo.get('__${activeTabName}__').getColumnNamesInDb()}"
                        th:text="${columnName}"></th>
                </tr>
                </thead>
                <tbody th:with="columnNamesHb=${T(com.bsk.domain.EntityInfo).capitalizeColumnNames(entitiesInfo.get('__${activeTabName}__').getColumnNamesInHb())},
                           listName=${entitiesInfo.get('__${activeTabName}__').getTableNameInHb()+'s'}">
                <tr th:each=" element: ${__${listName}__}">
                    <td th:each="columnName: ${columnNamesHb}"
                        th:with="getterName=${'element.get'+columnName+'()'}"
                        th:text="${__${getterName}__}" contenteditable="true"></td>
                    <td>
                        <form th:on="#" th:with="primaryKeyGetter=${'element.get'+columnNamesHb[0]+'()'}"
                              th:action="@{'/__${listName}__/delete/{id}'(id=${__${primaryKeyGetter}__})}"
                              th:method="delete">
                            <button type="submit" id="submitButton" class="btn btn-sm">Usuń</button>
                        </form>
                    </td>
                </tr>
                <form action="#" th:action="@{'/__${listName}__/create'}" method="post" th:object="${customer}">
                    <tr>
                        <td th:each="columnName : ${entitiesInfo.get('__${activeTabName}__').getColumnNamesInHb()}">
                            <input type="text" th:name="${columnName}"/>
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <button type="submit" name="createRow" class="btn btn-sm">Dodaj wiersz</button>
                        </td>
                    </tr>
                </form>
                </tbody>
            </table>
        </div>
    </div>
</div>



