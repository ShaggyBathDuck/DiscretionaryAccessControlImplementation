<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Dashboard</title>
    <link rel="stylesheet" href="css/logowanie.css"/>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css"/>
</head>
<body>

<!--/*--><!--@thymesVar id="entitiesInfo" type="TreeMap<String, com.bsk.domain.EntityInfo>"--><!--*/-->
<div class="container dashboard" th:with="activeTabName=${entitiesInfo.firstEntry().getKey()}">
    <h2>Moduł zarządzania zawartością</h2>
    <h4>Aktywny użytkownik: user@test.com</h4>
    <h4>
        <button type="submit" class="btn btn-sm">
            <a href="offering.html">Przekaż uprawnienia</a>
        </button>
        <button type="submit" class="btn btn-sm">Wyloguj</button>
    </h4>
    <div class="panel panel-default main dashboard" style="padding-left: 12px; padding-top: 0px">
        <div class="row">
            <div class="col-md-2 " style="height: 570px; background-color:rgba(34,171,233,0.2); padding-top: 10px">

                <H4 style="text-align: center">Hurtownia</H4>
                <hr/>
                <ul th:each="entry : ${entitiesInfo}">
                    <li>
                        <button type="button" class="btn btn-sq btn-block btn-space" th:text="${entry.key}"></button>
                    </li>
                </ul>
            </div>
            <div class="col-md-1">

            </div>
            <div class="col-md-8">
                <h4 style="text-align: left">Dane klientów</h4>
                <div>
                    <!--/*--><!--@thymesVar id="customers" type="List<com.bsk.domain.Customer>"--><!--*/-->
                    <table id="example" class="table table-condensed table-bordered table-hover" cellspacing="10"
                           width="70%">
                        <thead>
                        <tr>
                            <th th:each="columnName : ${entitiesInfo.get('__${activeTabName}__').getColumnNamesInDb()}"
                                th:text="${columnName}"></th>
                        </tr>
                        </thead>
                        <tbody th:with="columnNamesHb=${T(com.bsk.domain.EntityInfo).capitalizeColumnNames(entitiesInfo.get('__${activeTabName}__').getColumnNamesInHb())},
                               listName=${entitiesInfo.get('__${activeTabName}__').getTableNameInHb()+'s'}">
                        <tr th:each=" element: ${__${listName}__}">
                            <td th:each="columnName: ${columnNamesHb}"
                                th:with="getterName=${'element.get'+columnName+'()'}"
                                th:text="${__${getterName}__}" contenteditable="true"></td>
                            <td>
                                <form action="#" th:with="primaryKeyGetter=${'element.get'+columnNamesHb[0]+'()'}"
                                      th:action="@{'/__${listName}__/delete/{id}'(id=${__${primaryKeyGetter}__})}"
                                      th:method="delete">
                                    <button type="submit" id="submitButton" class="btn btn-sm">Usuń</button>
                                </form>
                            </td>
                        </tr>
                        <form action="#" th:action="@{'/__${listName}__/create'}" method="post">
                            <tr>
                                <td th:each="columnName : ${entitiesInfo.get('__${activeTabName}__').getColumnNamesInHb()}">
                                    <input type="text" th:name="${columnName}"/>
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    <button type="submit" name="createRow" class="btn btn-sm">Dodaj wiersz</button>
                                </td>
                            </tr>
                        </form>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>

    </div>
</div>

<!-- /#page-content-wrapper -->

</body>
</html>